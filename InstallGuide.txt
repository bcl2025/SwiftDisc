SwiftDisc Installation & Usage Guide
==================================

Overview
--------
SwiftDisc is a Swift-native Discord API library supporting iOS, macOS, tvOS, watchOS, and Windows (where supported by Foundation networking). This guide covers installation, configuration, and first run.

Requirements
-----------
- Swift 5.9+
- On Apple platforms: Xcode 15+ recommended
- A Discord Bot token from the Developer Portal
- If using message content, ensure the privileged intent is enabled on your application

Install via Swift Package Manager (SPM)
--------------------------------------
Option A) Add to Package.swift (for server/CLI projects)

1) In your Package.swift dependencies, add:
   .package(url: "https://github.com/M1tsumi/SwiftDisc.git", from: "0.5.0")

2) Add "SwiftDisc" to your target dependencies.

Option B) Add to Xcode project (for App targets)

1) Xcode > File > Add Packages...
2) Enter URL: https://github.com/M1tsumi/SwiftDisc.git
3) Choose version: Up to Next Major from 0.5.0
4) Add the SwiftDisc product to your app target

Configuring your Token
----------------------
- Recommended: Use an environment variable named DISCORD_TOKEN
  - macOS/iOS: Edit Scheme > Run > Arguments > Environment Variables
  - CLI/Server: export DISCORD_TOKEN=your_token_here
- Never hardcode tokens in source control

Selecting Intents
-----------------
- Common useful intents: guilds, guildMessages, messageContent (privileged)
- Example:
  try await client.loginAndConnect(intents: [.guilds, .guildMessages, .messageContent])
- Enable privileged intents (like message content) in the Discord Developer Portal under your applicationâ€™s settings

Minimal Example
---------------
import SwiftDisc

@main
struct BotMain {
    static func main() async {
        let token = ProcessInfo.processInfo.environment["DISCORD_TOKEN"] ?? "<Bot Token>"
        let client = DiscordClient(token: token)
        do {
            try await client.loginAndConnect(intents: [.guilds, .guildMessages, .messageContent])
            for await event in client.events {
                switch event {
                case .ready(let info):
                    print("Ready as: \(info.user.username)")
                case .messageCreate(let msg):
                    print("#\(msg.channel_id): \(msg.author.username): \(msg.content)")
                default:
                    break
                }
            }
        } catch {
            print("SwiftDisc error: \(error)")
        }
    }
}

Windows Notes
-------------
- If URLSessionWebSocketTask is unavailable on your toolchain, the current Gateway adapter will report that WebSocket is unavailable
- A dedicated Windows WebSocket adapter is planned; track the project CHANGELOG for updates

Troubleshooting
---------------
- Invalid token: Confirm DISCORD_TOKEN is set and correct
- No events received: Check intents; ensure messageContent privileged intent is enabled if you expect full message bodies
- Rate limiting: REST requests are minimally throttled; heavy usage may require per-route buckets (planned)
- Gateway disconnects: The client has basic heartbeat ACK tracking and will attempt reconnect; intermittent networks may still cause delays

Support & Documentation
-----------------------
- README.md for quick start, roadmap, and support links
- SwiftDiscDocs.txt for deeper architecture and API notes
- Discord Support: https://discord.com/invite/r4rCAXvb8d

Versioning
----------
- Semantic Versioning is used (MAJOR.MINOR.PATCH). See CHANGELOG.md for release notes
